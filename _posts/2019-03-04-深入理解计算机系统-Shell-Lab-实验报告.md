---
layout: post
title: "深入理解计算机系统 Shell Lab 实验报告"
comments: true
description: "深入理解计算机系统 Shell Lab 实验报告"
keywords: "Shell Lab, 深入理解计算机系统, CSAPP"
---

# 介绍

本实验，通过写一个简单的 Unix Shell 程序，来熟悉进程控制和信号的概念。

首先去[官网](http://csapp.cs.cmu.edu/3e/labs.html)下载 lab，将 lab 上传至服务器后，完成下面的步骤：

1. 执行 `tar xvf shlab-handout.tar` 解压缩。
2. 执行 `make` 编译并连接一些测试例程。
3. 在 `tsh.c` 中输入你的姓名。

`tsh.c(tiny shell)` 中已经提供了一个简单的 Unix Shell 的框架。完成 `tsh.c` 中剩余的空函数。

关于 Unix Shell 的用处，在书中已经有详细介绍，这里就不过多说。对于我们实现的 tiny shell 来说，例如执行：

```shell
tsh> jobs
```

tiny shell 就会执行内置的 jobs 命令。

```shell
tsh> /bin/ls -l -d
```

表示在前台执行 ls 程序，其中 ls 程序的入口，`int main(int argc, char *argv[])` 的参数内容如下：

1. argc == 3
2. argv[0] == "/bin/ls"
3. argv[1] == "-l"
4. argv[2] == "-d"

如果执行 `tsh> /bin/ls -l -d &`，相应的就会在后台执行 ls 程序。

值得注意的是，Unix Shell 支持 job control，job control 允许用户将 job 的执行，在前台与后台之间来回切换，还能改变一个 job 中进程的状态(running, stopped, or terminated)。

